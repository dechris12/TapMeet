<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸ’œ TapMeet</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f7f0ff; color:#222; }
    header { background:#6a0dad; color:white; text-align:center; padding:15px; }
    nav { background:#8a2be2; display:flex; justify-content:center; gap:15px; padding:10px; }
    nav button { background:white; color:#6a0dad; border:none; padding:10px 15px; border-radius:20px; cursor:pointer; }
    nav button:hover { background:#eee; }
    .section { display:none; padding:20px; }
    .active { display:block; }
    input, textarea { width:100%; padding:8px; margin:5px 0; border-radius:5px; border:1px solid #ccc; }
    button.main-btn { background:#6a0dad; color:white; border:none; padding:10px; border-radius:10px; cursor:pointer; }
    button.main-btn:hover { background:#500a96; }
    .profile-card { background:white; border-radius:10px; padding:15px; margin:10px 0; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .profile-card img { width:100%; max-height:200px; object-fit:cover; border-radius:10px; }
    .dark { background:#121212; color:white; }
    .dark header { background:#3c0a64; }
    .dark nav { background:#500a96; }
    .dark .profile-card { background:#1e1e1e; color:white; }
    .toggle { position:absolute; right:20px; top:20px; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ’œ TapMeet</h1>
    <span class="toggle" onclick="toggleMode()">ğŸŒ“</span>
  </header>

  <nav>
    <button onclick="showSection('signup')">Signup</button>
    <button onclick="showSection('login')">Login</button>
    <button onclick="showSection('explore')">Explore</button>
  </nav>

  <div id="signup" class="section active">
    <h2>Create Account</h2>
    <input id="su_name" placeholder="Name">
    <input id="su_age" placeholder="Age">
    <input id="su_height" placeholder="Height">
    <input id="su_blood" placeholder="Blood Group">
    <input id="su_genotype" placeholder="Genotype">
    <input id="su_location" placeholder="Location">
    <textarea id="su_desc" placeholder="Description"></textarea>
    <input id="su_telegram" placeholder="Telegram">
    <input id="su_whatsapp" placeholder="WhatsApp">
    <input id="su_email" placeholder="Email">
    <input id="su_password" type="password" placeholder="Password">
    <input id="su_photo" placeholder="Photo URL">
    <button class="main-btn" onclick="signup()">Sign Up</button>
    <p id="signup_msg"></p>
  </div>

  <div id="login" class="section">
    <h2>Login</h2>
    <input id="li_email" placeholder="Email">
    <input id="li_password" type="password" placeholder="Password">
    <button class="main-btn" onclick="login()">Login</button>
    <p id="login_msg"></p>
  </div>

  <div id="explore" class="section">
    <h2>Explore Profiles</h2>
    <div id="profiles"></div>
  </div>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbzA9ReKAtIBXOU4ySInm3a06-hmTBZ11dqBqjIfPEYKVrFxTo2X0Ylyi9vD9XMzrzQ/exec"; // replace with deployed script URL

    function toggleMode() {
      document.body.classList.toggle("dark");
    }

    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if (id === 'explore') loadProfiles();
    }

    async function signup() {
      const data = {
        action: "signup",
        name: document.getElementById("su_name").value,
        age: document.getElementById("su_age").value,
        height: document.getElementById("su_height").value,
        blood: document.getElementById("su_blood").value,
        genotype: document.getElementById("su_genotype").value,
        location: document.getElementById("su_location").value,
        description: document.getElementById("su_desc").value,
        telegram: document.getElementById("su_telegram").value,
        whatsapp: document.getElementById("su_whatsapp").value,
        email: document.getElementById("su_email").value,
        password: document.getElementById("su_password").value,
        photo: document.getElementById("su_photo").value
      };
      const res = await fetch(API_URL, { method: "POST", body: JSON.stringify(data) });
      const result = await res.json();
      document.getElementById("signup_msg").innerText = result.message;
    }

    async function login() {
      const data = {
        action: "login",
        email: document.getElementById("li_email").value,
        password: document.getElementById("li_password").value
      };
      const res = await fetch(API_URL, { method: "POST", body: JSON.stringify(data) });
      const result = await res.json();
      if (result.success) {
        document.getElementById("login_msg").innerText = "Welcome " + result.user.name;
      } else {
        document.getElementById("login_msg").innerText = result.message;
      }
    }

    async function loadProfiles() {
      const data = { action: "getProfiles" };
      const res = await fetch(API_URL, { method: "POST", body: JSON.stringify(data) });
      const result = await res.json();
      if (result.success) {
        const container = document.getElementById("profiles");
        container.innerHTML = "";
        result.users.forEach(user => {
          const card = document.createElement("div");
          card.className = "profile-card";
          card.innerHTML = `
            <img src="${user.photo || ''}" alt="photo">
            <h3>${user.name}, ${user.age}</h3>
            <p>${user.description}</p>
            <p>ğŸ“ ${user.location}</p>
            <p>ğŸ’¬ Telegram: ${user.telegram}</p>
            <p>ğŸ“± WhatsApp: ${user.whatsapp}</p>
            <p>ğŸ©¸ Blood: ${user.blood}, Genotype: ${user.genotype}</p>
          `;
          container.appendChild(card);
        });
      }
    }
  </script>
</body>
      </html>
